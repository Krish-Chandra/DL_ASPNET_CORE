@model IEnumerable<Request>

@{
    ViewBag.Title = "Index";
    //Layout = "~/Areas/Admin/Views/Shared/_AdminLayoutPage.cshtml";
}
<div class="panel panel-primary">
    <div class="panel-heading">
        Requests
    </div>

    <div class="panel-body">
        @if (Model.Count() > 0)
        {
            <table class="table">
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.Book.Title)
                    </th>
                    <th>
                        Requested By
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.RequesedOn)
                    </th>
                    <th></th>
                </tr>

                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Book.Title)
                        </td>
                        <td>
                            @*           @Html.Action("GetUserNameFromId", new { Id = item.UserId })*@
@*                            @Html.DisplayFor(modelItem => item.UserId)*@
                            @await Component.InvokeAsync("UserNameFromId", new { userId = item.UserId })
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.RequesedOn)
                        </td>
                        <td>
                            @using (Html.BeginForm("IssueBook", "Requests", new { Id = item.RequestID }, FormMethod.Post))
                            {
                                <button type="submit" class="btn btn-link">
                                    <i aria-hidden='true' class='glyphicon glyphicon-plus'></i>
                                </button>
                            }

                        </td>
                    </tr>
                }
            </table>
        }
        else
        {
            <div class="alert alert-danger">
                No request for books from members
            </div>

        }
    </div>
</div>